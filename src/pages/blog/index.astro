---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const blogPosts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime()
);
---

<BaseLayout title="Blog">
	<h1>Blog</h1>
	<p>A collection of thoughts and writings.</p>

	<ul style="list-style: none; margin-left: 0; margin-top: 2rem;">
		{blogPosts.map((post) => (
			<li style="margin-bottom: 2rem;">
				<article>
					<h2 style="margin-bottom: 0.5rem;">
						<a href={`/blog/${post.slug}`}>{post.data.title}</a>
					</h2>
					{post.data.description && (
						<p style="margin-bottom: 0.5rem; opacity: 0.8;">
							{post.data.description}
						</p>
					)}
					<time
						style="font-size: 0.9rem; opacity: 0.7;"
						datetime={post.data.pubDate.toISOString()}
					>
						{post.data.pubDate.toLocaleDateString('en-US', {
							year: 'numeric',
							month: 'long',
							day: 'numeric'
						})}
					</time>
				</article>
			</li>
		))}
	</ul>
</BaseLayout>
